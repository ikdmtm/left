# 将来的な拡張機能

## イベント機能

### 概要
人生の残り時間だけでなく、ユーザーが設定した任意のイベントまでの残り時間も表示できるようにする。

### 機能詳細

#### 1. イベント登録機能
- **イベント名**: 任意のテキスト（例：誕生日、記念日、試験日、プロジェクト締切）
- **イベント日時**: 日付と時刻を設定
- **カテゴリ**: 仕事、プライベート、記念日などのカテゴリ分け
- **色**: イベントごとに色を設定（視覚的な区別）
- **リピート設定**: 毎年、毎月、毎週など繰り返しイベント

#### 2. カウントダウン表示
- **複数イベント対応**: 登録した複数のイベントを一覧表示
- **単位切替**: 秒、分、時間、日、週、月単位で表示
- **進捗バー**: イベントまでの進捗を視覚化
- **ソート機能**: 日付順、カテゴリ別、重要度順で並び替え

#### 3. 通知機能
- **リマインダー**: イベント前に通知
  - 1日前、1週間前、1ヶ月前など柔軟な設定
  - 複数の通知タイミングを設定可能
- **残り時間アラート**: 残り時間が少なくなったら通知
  - 「残り7日」「残り24時間」など閾値を設定
  - 重要なイベントを見逃さない
- **デイリーサマリー**: 今日・今週のイベント一覧を朝に通知

#### 4. イベント履歴
- **過去イベント**: 完了したイベントを履歴として保存
- **振り返り**: 過去のイベントと1行メモを紐付けて振り返り
- **統計**: イベント達成率、カテゴリ別の時間配分など

### 技術的な検討事項

#### データモデル
```typescript
interface Event {
  id: string;
  name: string;
  datetime: Date;
  category: EventCategory;
  color: string;
  repeat?: RepeatPattern;
  notifications: NotificationSetting[];
  memo?: string;
  isCompleted: boolean;
  createdAt: Date;
}

type EventCategory = 'work' | 'personal' | 'anniversary' | 'other';

interface RepeatPattern {
  type: 'daily' | 'weekly' | 'monthly' | 'yearly';
  interval: number; // 1 = 毎回, 2 = 2回に1回
  endDate?: Date;
}

interface NotificationSetting {
  timing: 'before' | 'at' | 'threshold';
  value: number; // 分、時間、日数
  unit: 'minute' | 'hour' | 'day' | 'week';
  enabled: boolean;
}
```

#### ストレージ
- **AsyncStorage**: イベントデータをJSON形式で保存
- **マイグレーション**: 既存の設定データとの互換性を保つ
- **バックアップ**: イベントデータのエクスポート/インポート機能

#### 通知実装
- **Expo Notifications**: ローカル通知を利用
- **バックグラウンド処理**: アプリが起動していなくても通知
- **通知権限**: 初回起動時またはイベント登録時に権限を要求

### UI/UX検討

#### 画面構成
1. **イベント一覧画面**: 
   - ホーム画面にタブまたはボタンで遷移
   - カード形式でイベントを表示
   - スワイプで削除/編集
   
2. **イベント追加/編集画面**:
   - モーダルまたは専用画面
   - 日時ピッカー、カテゴリ選択、色選択
   - 通知設定セクション

3. **イベント詳細画面**:
   - カウントダウン詳細表示
   - メモの追加/編集
   - 履歴の表示

#### デザイン
- **統一感**: 既存のホーム画面と同じデザイン言語
- **視認性**: イベントごとの色分けで一目で判別
- **アニメーション**: イベント追加時や完了時の軽量なアニメ

### 実装優先度

#### Phase 1: 基本機能
- [ ] イベントの追加/編集/削除
- [ ] カウントダウン表示
- [ ] シンプルな通知（1つのタイミングのみ）

#### Phase 2: 拡張機能
- [ ] カテゴリ管理
- [ ] 複数通知設定
- [ ] リピートイベント

#### Phase 3: 高度な機能
- [ ] イベント履歴と統計
- [ ] デイリーサマリー
- [ ] イベントデータのエクスポート/インポート

### セキュリティとプライバシー
- **ローカルストレージのみ**: すべてのデータはデバイス内に保存
- **クラウド同期なし**: プライバシーを最優先（将来的にオプション化も検討）
- **通知権限**: ユーザーの明示的な許可のみで有効化

### パフォーマンス考慮
- **効率的な計算**: 大量のイベントでも高速に処理
- **バッテリー消費**: 通知の最適化でバッテリーを節約
- **ストレージ容量**: 不要な履歴データの自動削除オプション

## その他の将来的な機能アイデア

### データ可視化
- **Weekグリッド拡張**: イベントをグリッド上にマッピング
- **タイムライン表示**: 時系列でイベントと人生を俯瞰
- **グラフ**: カテゴリ別の時間配分円グラフ

### エクスポート機能
- **PDF出力**: 人生の進捗レポート
- **画像生成**: SNS共有用のビジュアル
- **CSV出力**: データ分析用

### カスタマイズ
- **テーマ変更**: ライト/ダーク/カスタムカラー
- **ウィジェット**: ホーム画面にカウントダウン表示
- **Apple Watch対応**: 手首で残り時間を確認

### ゲーミフィケーション（慎重に検討）
- **マイルストーン**: 特定の日数達成でバッジ
- **振り返り習慣**: 1行メモの継続でリワード
- ※ただし、時間の価値を損なわないように注意
